---
import Layout from '../layouts/BaseLayout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

type Post = CollectionEntry<'posts'>;
const posts: Post[] = await getCollection('posts');
posts.sort((a, b) => a.data.pubDate.getTime() - b.data.pubDate.getTime());
console.log(posts);
---

<div class="mb-2">
	{posts.slice(0, 1).map((post) => (
		<a href={`/posts/${post.slug}`}>
			<div class="bg-black rounded-[var(--radius)] shadow-[var(--shadow)] overflow-hidden flex flex-col">
				<img src={`/src/content/images/${post.data.image}`} alt={post.data.image} class="w-full h-80 object-cover" />
				<div class="p-5 flex-1 flex flex-col">
					<h2 class="text-lg font-bold mb-2 text-white font-sans">{post.data.title}</h2>
					<p class="text-white font-sans flex-1">{post.data.excerpt}</p>
				</div>
			</div>
		</a>
	))}
</div>

<div class="grid gap-2 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
	{posts.slice(1, 5).map((post) => (
		<a href={`/posts/${post.slug}`}>
			<div class="bg-black rounded-[var(--radius)] shadow-[var(--shadow)] overflow-hidden flex flex-col">
				<img src={`/src/content/images/${post.data.image}`} alt={post.data.image} class="w-full h-40 object-cover" />
				<div class="p-5 flex-1 flex flex-col">
					<h2 class="text-lg font-bold mb-2 text-white font-sans">{post.data.title}</h2>
					<p class="text-white font-sans flex-1">{post.data.excerpt}</p>
				</div>
			</div>
		</a>
	))}
</div>